(this["webpackJsonpmovil-picme"]=this["webpackJsonpmovil-picme"]||[]).push([[0],{36:function(e,t,o){},37:function(e,t,o){},38:function(e,t,o){},58:function(e,t,o){},59:function(e,t,o){},60:function(e,t,o){},66:function(e,t,o){"use strict";o.r(t);var a=o(1),s=o.n(a),c=o(30),i=o.n(c),n=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,67)).then((function(t){var o=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;o(e),a(e),s(e),c(e),i(e)}))},l=(o(36),o(9)),d=o(10),r=o(12),h=o(11),j=o(18),C=o(2),p=(o(37),o(38),o(4)),u=o.n(p),m=o(0),b=function(e){Object(r.a)(o,e);var t=Object(h.a)(o);function o(){var e;return Object(l.a)(this,o),(e=t.call(this)).onBackToClick=function(t){window.location=e.props.backTo},e.onDeleteColClick=function(t){u.a.post("https://api.movil2.cointla.com/api/colecciones/eliminar.php",{ColCod:e.props.deleteCol}).then((function(t){window.location=e.props.backTo}))},e.onLogoutClick=function(e){window.localStorage.removeItem("loged"),window.location="#/"},localStorage.getItem("loged")||(window.location="#/"),e.state={backTo:"",deleteCol:"",logout:""},e}return Object(d.a)(o,[{key:"componentDidMount",value:function(){void 0!==this.props.backTo&&this.setState({backTo:Object(m.jsx)("div",{className:"backToIcon",onClick:this.onBackToClick,children:Object(m.jsx)("i",{className:"material-icons",children:"arrow_back_ios"})})}),void 0!==this.props.deleteCol&&this.setState({deleteCol:Object(m.jsx)("div",{className:"deleteColIcon",onClick:this.onDeleteColClick,children:Object(m.jsx)("i",{className:"material-icons",children:"delete_outline"})})}),void 0===this.props.backTo&&void 0===this.props.deleteCol&&void 0!==this.logout&&this.setState({logo:Object(m.jsx)("div",{className:"TopLogo"})});var e=localStorage.getItem("loged");void 0===this.props.backTo&&void 0===this.props.deleteCol&&e&&this.setState({logout:Object(m.jsx)("div",{className:"LogoutIcon",onClick:this.onLogoutClick,children:Object(m.jsx)("i",{className:"material-icons",children:"logout"})})})}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"TopBar",children:[Object(m.jsx)("div",{className:"LogoContainerTop",children:Object(m.jsx)("div",{className:"LogoTopBar"})}),this.state.backTo,this.state.deleteCol,this.state.logout]})}}]),o}(s.a.Component),v=(o(58),function(e){Object(r.a)(o,e);var t=Object(h.a)(o);function o(){var e;return Object(l.a)(this,o),(e=t.call(this)).onLoginClick=function(t){var o=e.state.UsrUsr,a=e.state.UsrPwd;u.a.defaults.withCredentials=!0,u.a.post("https://api.movil2.cointla.com/api/usuarios/login.php",{UsrUsr:o,UsrPwd:a}).then((function(t){var o=t.data;"OK"===o.status?(window.location="#/colecciones",window.localStorage.setItem("loged","OK")):e.setState({errorMessage:o.payload.message})}))},e.state={UsrUsr:"",UsrPwd:"",errorMessage:""},e}return Object(d.a)(o,[{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"LoginPage",children:[Object(m.jsx)(b,{}),Object(m.jsx)("div",{className:"LogoContainer",children:Object(m.jsx)("div",{className:"background",children:Object(m.jsx)("div",{className:"Logo"})})}),Object(m.jsx)("div",{className:"FormContainer",children:Object(m.jsxs)("div",{className:"LoginForm",children:[Object(m.jsx)("div",{className:"FieldContainer",children:Object(m.jsx)("input",{type:"text",id:"UsrUsr",value:this.state.UsrUsr,onChange:function(t){return e.setState({UsrUsr:t.target.value})},placeholder:"Usuario",autoComplete:"new-password"})}),Object(m.jsx)("div",{className:"FieldContainer",children:Object(m.jsx)("input",{type:"password",id:"UsrPwd",value:this.state.UsrPwd,onChange:function(t){return e.setState({UsrPwd:t.target.value})},placeholder:"Contrase\xf1a",autoComplete:"new-password"})}),Object(m.jsx)("div",{className:"ErrorMessage",children:this.state.errorMessage}),Object(m.jsx)("div",{className:"FieldContainer",children:Object(m.jsx)("div",{onClick:this.onLoginClick,className:"Button",children:"Acceder"})})]})})]})}}]),o}(s.a.Component)),O=o(13),f=(o(59),function(e){Object(r.a)(o,e);var t=Object(h.a)(o);function o(){var e;return Object(l.a)(this,o),(e=t.call(this)).onColClick=function(e){var t=e.target.id;window.location="#/coleccion/"+t},e.onAddColClick=function(t){e.setState({showAddColForm:"block"})},e.onCancelClick=function(t){e.setState({showAddColForm:"none"})},e.onAddNewClick=function(t){var o=Object(O.a)(e);u.a.post("https://api.movil2.cointla.com/api/colecciones/crear.php",{ColNom:e.state.ColNom,ColDesc:e.state.ColNom}).then((function(t){o.loadData(),e.setState({showAddColForm:"none",ColNom:""})}))},e.loadData=function(){u.a.defaults.withCredentials=!0,u.a.post("https://api.movil2.cointla.com/api/colecciones/listado.php",{}).then((function(t){var o=t.data;if("OK"===o.status){var a=[];for(var s in o.payload)if(Object.hasOwnProperty.call(o.payload,s)){var c=o.payload[s];a.push(Object(m.jsxs)("div",{className:"CItem",id:c.ColCod,onClick:e.onColClick,children:[Object(m.jsxs)("div",{className:"Desc",id:c.ColCod,onClick:e.onColClick,children:[c.ColDesc," "]},c.ColCod),Object(m.jsx)("div",{className:"Icon",children:Object(m.jsx)("i",{className:"material-icons",id:c.ColCod,onClick:e.onColClick,children:"arrow_forward_ios"},c.ColCod)})]},c.ColCod))}e.setState({cols_divs:a})}else e.setState({errorMessage:o.payload.message})}))},e.state={cols_divs:"",showAddColForm:"none",ColNom:""},e}return Object(d.a)(o,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"ColeccionesPage",children:[Object(m.jsx)(b,{}),Object(m.jsx)("div",{className:"AddColForm",style:{display:this.state.showAddColForm},children:Object(m.jsxs)("div",{className:"ContainerForm",children:[Object(m.jsx)("h3",{children:"Ingrese Nombre:"}),Object(m.jsx)("div",{className:"NameColInput",children:Object(m.jsx)("input",{placeholder:"Escriba el nombre de su nueva colecci\xf3n",onChange:function(t){return e.setState({ColNom:t.target.value})},value:this.state.ColNom})}),Object(m.jsx)("div",{className:"AddNewColButton",onClick:this.onAddNewClick,children:"Crear"}),Object(m.jsx)("div",{className:"CancelColButton",onClick:this.onCancelClick,children:"Cancelar"})]})}),Object(m.jsx)("h2",{className:"Title",children:"Colecciones"}),Object(m.jsx)("div",{className:"AddColButton",onClick:this.onAddColClick,children:Object(m.jsx)("i",{className:"material-icons",children:"queue"})}),this.state.cols_divs]})}}]),o}(s.a.Component)),x=(o(60),function(e){Object(r.a)(o,e);var t=Object(h.a)(o);function o(){var e;return Object(l.a)(this,o),(e=t.call(this)).onAddPhotoClick=function(e){document.getElementById("file").click()},e.onPhotoSelected=function(t){var o=document.getElementById("file");if(o.files[0].size<=19e6){var a=new FormData;a.append("ColCod",e.props.ColCod),a.append("FotFile",o.files[0]);var s=Object(O.a)(e);e.setState({showLoading:"block"}),u.a.post("https://api.movil2.cointla.com/api/fotos/crear.php",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){s.loadData(e.props.ColCod),e.setState({showLoading:"none"})}))}else alert("La fotograf\xeda es muy pesada (20MB M\xe1ximo)")},e.loadData=function(t){var o=Object(O.a)(e);u.a.defaults.withCredentials=!0,u.a.post("https://api.movil2.cointla.com/api/colecciones/listone.php",{ColCod:t}).then((function(a){var s=a.data;if("OK"===s.status){var c=[],i=s.payload.ColDesc;for(var n in s.payload.fotos)Object.hasOwnProperty.call(s.payload.fotos,n)&&function(){var e=s.payload.fotos[n],a="https://api.movil2.cointla.com/data"+e.FotPath;c.push(Object(m.jsx)("div",{className:"FItem",id:e.FotCod,style:{backgroundImage:"url("+a+")"},children:Object(m.jsx)("div",{className:"inPhotoIcon",onClick:function(a){u.a.post("https://api.movil2.cointla.com/api/fotos/eliminar.php",{ColCod:t,FotCod:e.FotCod}).then((function(e){o.loadData(o.props.ColCod)}))},children:Object(m.jsx)("i",{className:"material-icons",children:"delete_outline"})})},e.FotCod))}();e.setState({col_fotos:c,col_name:i})}else e.setState({errorMessage:s.payload.message})}))},e.state={col_fotos:"",col_name:"",showLoading:"none"},e}return Object(d.a)(o,[{key:"componentDidMount",value:function(){this.loadData(this.props.ColCod)}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"ColeccionPage",children:[Object(m.jsx)(b,{backTo:"#/colecciones",deleteCol:this.props.ColCod}),Object(m.jsx)("h2",{className:"Title",children:this.state.col_name}),Object(m.jsxs)("div",{className:"LoadingAxios",style:{display:this.state.showLoading},children:[Object(m.jsxs)("div",{className:"lds-ellipsis",children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{})]}),Object(m.jsx)("div",{className:"LoadingText",children:"Cargando..."})]}),Object(m.jsx)("input",{type:"file",onChange:this.onPhotoSelected,name:"file",id:"file",style:{display:"none"}}),Object(m.jsx)("div",{className:"AddPhoto",onClick:this.onAddPhotoClick,children:Object(m.jsx)("i",{className:"material-icons",children:"add_a_photo"})}),Object(m.jsx)("div",{className:"PhotosContainer",children:this.state.col_fotos})]})}}]),o}(s.a.Component)),g=function(){var e=Object(C.f)().ColCod;return Object(m.jsx)(x,{ColCod:e})},k=function(e){Object(r.a)(o,e);var t=Object(h.a)(o);function o(){return Object(l.a)(this,o),t.apply(this,arguments)}return Object(d.a)(o,[{key:"render",value:function(){return Object(m.jsx)("div",{className:"App",id:"picme-app",children:Object(m.jsx)(j.a,{children:Object(m.jsxs)(C.c,{children:[Object(m.jsx)(C.a,{path:"/",exact:!0,children:Object(m.jsx)(v,{})}),Object(m.jsx)(C.a,{path:"/colecciones",exact:!0,children:Object(m.jsx)(f,{})}),Object(m.jsx)(C.a,{path:"/coleccion/:ColCod",exact:!0,children:Object(m.jsx)(g,{})})]})})})}}]),o}(s.a.Component);i.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(k,{})}),document.getElementById("root")),n()}},[[66,1,2]]]);
//# sourceMappingURL=main.ea0837b5.chunk.js.map